{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://trading-risk-game-ts/./client/src/utils/api.ts","webpack://trading-risk-game-ts/./client/src/utils/toast.ts","webpack://trading-risk-game-ts/./client/src/modules/profitGrades.ts","webpack://trading-risk-game-ts/./client/src/modules/tutorial.ts","webpack://trading-risk-game-ts/./client/src/script.ts"],"sourcesContent":["const API_BASE = '';\nexport async function get(endpoint) {\n    const response = await fetch(`${API_BASE}${endpoint}`);\n    if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return response.json();\n}\nexport async function post(endpoint, data) {\n    const response = await fetch(`${API_BASE}${endpoint}`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n    });\n    if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return response.json();\n}\nexport async function put(endpoint, data) {\n    const response = await fetch(`${API_BASE}${endpoint}`, {\n        method: 'PUT',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n    });\n    if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return response.json();\n}\n","export function showToast(message, type = 'success') {\n    const container = document.getElementById('toast-container') || createToastContainer();\n    const toast = document.createElement('div');\n    toast.className = `toast ${type}`;\n    toast.textContent = message;\n    container.appendChild(toast);\n    // Auto remove after 3 seconds\n    setTimeout(() => {\n        toast.style.animation = 'toastSlideOut 0.3s ease forwards';\n        setTimeout(() => {\n            if (toast.parentNode) {\n                toast.parentNode.removeChild(toast);\n            }\n        }, 300);\n    }, 3000);\n}\nfunction createToastContainer() {\n    const container = document.createElement('div');\n    container.id = 'toast-container';\n    container.className = 'toast-container';\n    document.body.appendChild(container);\n    return container;\n}\n","const PROFIT_GRADES = [\n    {\n        id: 'breakeven',\n        title: 'Беззбиткові',\n        minProfit: 0,\n        minWinRate: 33.3,\n        color: '#ffd93d',\n        emoji: '⚖️'\n    },\n    {\n        id: 'light',\n        title: 'Легкий прибуток',\n        minProfit: 5,\n        minWinRate: 40,\n        color: '#06d6a0',\n        emoji: '🌱'\n    },\n    {\n        id: 'good',\n        title: 'Хороший прибуток',\n        minProfit: 15,\n        minWinRate: 45,\n        color: '#10b981',\n        emoji: '💚'\n    },\n    {\n        id: 'excellent',\n        title: 'Відмінний прибуток',\n        minProfit: 30,\n        minWinRate: 50,\n        color: '#8b5cf6',\n        emoji: '💎'\n    },\n    {\n        id: 'amazing',\n        title: 'Неймовірний прибуток',\n        minProfit: 50,\n        minWinRate: 60,\n        color: '#f59e0b',\n        emoji: '🚀'\n    }\n];\nexport function updateProfitGradeDisplay(takes, stops, profit) {\n    const container = document.getElementById('profit-grades-list');\n    const currentLevelDisplay = document.getElementById('current-level-display');\n    container.innerHTML = '';\n    const totalPositions = takes + stops;\n    const winRate = totalPositions > 0 ? (takes / totalPositions) * 100 : 0;\n    let currentGrade = null;\n    PROFIT_GRADES.forEach(grade => {\n        const item = document.createElement('div');\n        item.className = 'profit-grade-item';\n        const achieved = profit >= grade.minProfit && winRate >= grade.minWinRate;\n        const isCurrent = !currentGrade && profit >= grade.minProfit && winRate >= grade.minWinRate;\n        if (achieved) {\n            item.classList.add('achieved');\n            currentGrade = grade;\n        }\n        if (isCurrent) {\n            item.classList.add('current');\n        }\n        item.innerHTML = `\n      <div class=\"grade-header\">\n        <span class=\"grade-title\">${grade.emoji} ${grade.title}</span>\n        <span class=\"grade-percentage\">${grade.minProfit}%+</span>\n      </div>\n      <div class=\"grade-requirement\">Мінімум ${grade.minProfit}% прибутку</div>\n      <div class=\"grade-winrate\">Win-rate: ${grade.minWinRate}%+</div>\n    `;\n        container.appendChild(item);\n    });\n    // Update current level display\n    if (currentGrade) {\n        currentLevelDisplay.textContent = `Поточний рівень: ${currentGrade.title}`;\n        currentLevelDisplay.className = `current-level-display grade-${currentGrade.id}`;\n    }\n    else {\n        currentLevelDisplay.textContent = 'Поточний рівень: Початковий рівень';\n        currentLevelDisplay.className = 'current-level-display initial';\n    }\n}\n","import { showToast } from '../utils/toast';\nconst TUTORIAL_STEPS = [\n    {\n        title: 'Вітаємо в грі!',\n        text: 'Це гра для вивчення ризик-менеджменту в трейдингу. Ви будете симулювати торгові позиції та дивитися на результати.'\n    },\n    {\n        title: 'Торгові позиції',\n        text: 'Кожна клітинка представляє торгову позицію. Клікайте по них, щоб позначити як тейк (прибуток) або стоп (збиток).',\n        target: '#positions-grid'\n    },\n    {\n        title: 'Статистика',\n        text: 'Тут відображається ваша статистика: кількість тейків, стопів, загальний прибуток та win-rate.',\n        target: '.stats-panel'\n    },\n    {\n        title: 'Налаштування',\n        text: 'Тут ви можете налаштувати ризик на позицію та співвідношення прибутку (RR).',\n        target: '.settings-section'\n    },\n    {\n        title: 'Градації прибутку',\n        text: 'Система показує ваш прогрес через різні рівні прибутковості.',\n        target: '.profit-grades-section'\n    },\n    {\n        title: 'Готово!',\n        text: 'Тепер ви знаєте основи. Почніть клікати по позиціях та спостерігайте за своїми результатами!'\n    }\n];\nclass TutorialManager {\n    constructor() {\n        this.currentStep = 0;\n    }\n    start() {\n        this.currentStep = 0;\n        this.createOverlay();\n        this.showStep();\n    }\n    createOverlay() {\n        this.overlay = document.createElement('div');\n        this.overlay.className = 'tutorial-overlay';\n        this.overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.7);\n      z-index: 9999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    `;\n        this.modal = document.createElement('div');\n        this.modal.className = 'tutorial-modal';\n        this.modal.style.cssText = `\n      background: var(--surface-color);\n      padding: 2rem;\n      border-radius: 16px;\n      max-width: 500px;\n      margin: 1rem;\n      text-align: center;\n      border: 1px solid var(--border-color);\n      box-shadow: var(--shadow-lg);\n    `;\n        this.overlay.appendChild(this.modal);\n        document.body.appendChild(this.overlay);\n    }\n    showStep() {\n        const step = TUTORIAL_STEPS[this.currentStep];\n        if (!step || !this.modal)\n            return;\n        // Highlight target element\n        this.highlightTarget(step.target);\n        this.modal.innerHTML = `\n      <h3 style=\"margin-bottom: 1rem; font-size: 1.25rem; font-weight: 700;\">${step.title}</h3>\n      <p style=\"margin-bottom: 2rem; color: var(--text-muted);\">${step.text}</p>\n      <div style=\"display: flex; gap: 1rem; justify-content: center;\">\n        ${this.currentStep > 0 ? '<button id=\"tutorial-prev\" class=\"btn btn-secondary\">Назад</button>' : ''}\n        <button id=\"tutorial-next\" class=\"btn btn-primary\">\n          ${this.currentStep === TUTORIAL_STEPS.length - 1 ? 'Завершити' : 'Далі'}\n        </button>\n        <button id=\"tutorial-skip\" class=\"btn btn-outline\">Пропустити</button>\n      </div>\n    `;\n        // Add event listeners\n        this.modal.querySelector('#tutorial-next')?.addEventListener('click', () => {\n            if (this.currentStep === TUTORIAL_STEPS.length - 1) {\n                this.finish();\n            }\n            else {\n                this.next();\n            }\n        });\n        this.modal.querySelector('#tutorial-prev')?.addEventListener('click', () => {\n            this.prev();\n        });\n        this.modal.querySelector('#tutorial-skip')?.addEventListener('click', () => {\n            this.finish();\n        });\n        // Execute step action\n        if (step.action) {\n            step.action();\n        }\n    }\n    highlightTarget(selector) {\n        // Remove previous highlights\n        document.querySelectorAll('.tutorial-highlight').forEach(el => {\n            el.classList.remove('tutorial-highlight');\n        });\n        if (selector) {\n            const target = document.querySelector(selector);\n            if (target) {\n                target.classList.add('tutorial-highlight');\n                // Add highlight CSS if not exists\n                if (!document.querySelector('#tutorial-highlight-style')) {\n                    const style = document.createElement('style');\n                    style.id = 'tutorial-highlight-style';\n                    style.textContent = `\n            .tutorial-highlight {\n              position: relative;\n              z-index: 10000;\n              box-shadow: 0 0 0 4px var(--primary-color), 0 0 0 8px rgba(139, 92, 246, 0.3) !important;\n              border-radius: 8px !important;\n            }\n          `;\n                    document.head.appendChild(style);\n                }\n            }\n        }\n    }\n    next() {\n        this.currentStep++;\n        this.showStep();\n    }\n    prev() {\n        this.currentStep--;\n        this.showStep();\n    }\n    finish() {\n        if (this.overlay) {\n            document.body.removeChild(this.overlay);\n        }\n        // Remove highlights\n        document.querySelectorAll('.tutorial-highlight').forEach(el => {\n            el.classList.remove('tutorial-highlight');\n        });\n        // Remove highlight style\n        const style = document.querySelector('#tutorial-highlight-style');\n        if (style) {\n            style.remove();\n        }\n        showToast('Туторіал завершено!', 'success');\n    }\n}\nexport const tutorialManager = new TutorialManager();\n","import { get, put, post } from './utils/api';\nimport { showToast } from './utils/toast';\nimport { updateProfitGradeDisplay } from './modules/profitGrades';\nimport { tutorialManager } from './modules/tutorial';\nclass RiskManagementGame {\n    constructor() {\n        this.gameState = {\n            positions: [],\n            settings: {\n                id: 1,\n                risk_per_position: 1.0,\n                reward_ratio: 2.0,\n                tutorial_completed: false,\n                tutorial_skipped_forever: false\n            },\n            stats: {\n                takes: 0,\n                stops: 0,\n                profit: 0,\n                winRate: 0\n            }\n        };\n    }\n    async init() {\n        try {\n            // Initialize theme\n            this.initTheme();\n            await this.loadGameState();\n            this.setupUI();\n            this.checkTutorial();\n            console.log('✅ Гра ініціалізована успішно');\n        }\n        catch (error) {\n            console.error('❌ Помилка ініціалізації гри:', error);\n            showToast('Помилка завантаження гри', 'error');\n        }\n    }\n    initTheme() {\n        const savedTheme = localStorage.getItem('theme') || 'light';\n        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n        const theme = savedTheme === 'auto' ? (systemPrefersDark ? 'dark' : 'light') : savedTheme;\n        document.documentElement.setAttribute('data-theme', theme);\n        this.updateThemeToggle(theme);\n    }\n    toggleTheme() {\n        const currentTheme = document.documentElement.getAttribute('data-theme');\n        const newTheme = currentTheme === 'light' ? 'dark' : 'light';\n        document.documentElement.setAttribute('data-theme', newTheme);\n        localStorage.setItem('theme', newTheme);\n        this.updateThemeToggle(newTheme);\n    }\n    updateThemeToggle(theme) {\n        const toggle = document.getElementById('theme-toggle');\n        if (toggle) {\n            toggle.innerHTML = theme === 'light' ? '🌙' : '☀️';\n            toggle.setAttribute('aria-label', theme === 'light' ? 'Switch to dark mode' : 'Switch to light mode');\n        }\n    }\n    async loadGameState() {\n        try {\n            // Завантажуємо дані паралельно\n            const [positions, settings] = await Promise.all([\n                get('/api/positions'),\n                get('/api/settings')\n            ]);\n            //@ts-ignore\n            this.gameState.positions = positions;\n            //@ts-ignore\n            this.gameState.settings = settings;\n            this.calculateStats();\n        }\n        catch (error) {\n            console.error('Помилка завантаження стану гри:', error);\n            throw error;\n        }\n    }\n    setupUI() {\n        this.createPositionsGrid();\n        this.updateStatsDisplay();\n        this.updateSettingsUI();\n        this.setupEventListeners();\n    }\n    createPositionsGrid() {\n        const grid = document.getElementById('positions-grid');\n        grid.innerHTML = '';\n        this.gameState.positions.forEach(position => {\n            const card = document.createElement('div');\n            card.className = `position-card ${position.result}`;\n            card.textContent = position.id.toString();\n            card.dataset.id = position.id.toString();\n            card.addEventListener('click', () => this.handlePositionClick(position.id));\n            grid.appendChild(card);\n        });\n    }\n    async handlePositionClick(positionId) {\n        try {\n            const position = this.gameState.positions.find(p => p.id === positionId);\n            if (!position)\n                return;\n            // Циклічне перемикання станів\n            const states = ['none', 'take', 'stop'];\n            const currentIndex = states.indexOf(position.result);\n            const nextState = states[(currentIndex + 1) % states.length];\n            // Оновлюємо на сервері\n            await put(`/api/positions/${positionId}`, { result: nextState });\n            // Оновлюємо локальний стан\n            position.result = nextState;\n            // Оновлюємо UI\n            const card = document.querySelector(`[data-id=\"${positionId}\"]`);\n            card.className = `position-card ${nextState}`;\n            // Перераховуємо статистику\n            this.calculateStats();\n            this.updateStatsDisplay();\n        }\n        catch (error) {\n            console.error('Помилка оновлення позиції:', error);\n            showToast('Помилка оновлення позиції', 'error');\n        }\n    }\n    calculateStats() {\n        const takes = this.gameState.positions.filter(p => p.result === 'take').length;\n        const stops = this.gameState.positions.filter(p => p.result === 'stop').length;\n        const totalPositions = takes + stops;\n        // Розрахунок прибутку: тейки дають +RR%, стопи дають -1%\n        const profit = (takes * this.gameState.settings.reward_ratio) + (stops * -1);\n        const winRate = totalPositions > 0 ? (takes / totalPositions) * 100 : 0;\n        this.gameState.stats = {\n            takes,\n            stops,\n            profit: parseFloat(profit.toFixed(1)),\n            winRate: parseFloat(winRate.toFixed(1))\n        };\n    }\n    updateStatsDisplay() {\n        document.getElementById('takes-count').textContent = this.gameState.stats.takes.toString();\n        document.getElementById('stops-count').textContent = this.gameState.stats.stops.toString();\n        document.getElementById('profit-pct').textContent = `${this.gameState.stats.profit}%`;\n        document.getElementById('win-rate').textContent = `${this.gameState.stats.winRate}%`;\n        // Оновлюємо градації прибутку\n        updateProfitGradeDisplay(this.gameState.stats.takes, this.gameState.stats.stops, this.gameState.stats.profit);\n        // Оновлюємо мотиваційне повідомлення\n        this.updateMotivationMessage();\n    }\n    updateMotivationMessage() {\n        const msgEl = document.getElementById('motivation-msg');\n        const { takes, stops, profit } = this.gameState.stats;\n        if (takes === 0 && stops === 0) {\n            msgEl.textContent = 'Почніть торгувати, щоб побачити результати!';\n        }\n        else if (profit === 0 && takes === 5 && stops === 10) {\n            msgEl.textContent = '⚖️ Ідеальна беззбитковість! Тепер спробуйте досягти прибутку.';\n        }\n        else if (profit > 0) {\n            msgEl.textContent = `💰 Чудово! Ви в прибутку ${profit}%. Продовжуйте у тому ж дусі!`;\n        }\n        else if (profit < 0) {\n            msgEl.textContent = '📉 Не переживайте через стопи - вони частина стратегії. Трейдинг - це довгострокова гра!';\n        }\n        else {\n            msgEl.textContent = 'Продовжуйте торгувати, щоб побачити свій прогрес!';\n        }\n    }\n    updateSettingsUI() {\n        document.getElementById('risk-input').value =\n            this.gameState.settings.risk_per_position.toString();\n        document.getElementById('reward-input').value =\n            this.gameState.settings.reward_ratio.toString();\n    }\n    setupEventListeners() {\n        // Theme toggle\n        document.getElementById('theme-toggle')?.addEventListener('click', () => {\n            this.toggleTheme();\n        });\n        // Збереження налаштувань\n        document.getElementById('save-settings').addEventListener('click', async () => {\n            await this.saveSettings();\n        });\n        // Скидання позицій\n        document.getElementById('reset-positions').addEventListener('click', async () => {\n            await this.resetPositions();\n        });\n        // Показати гайд\n        document.getElementById('show-guide-btn').addEventListener('click', () => {\n            tutorialManager.start();\n        });\n        // Модальне вікно туторіалу\n        document.getElementById('start-tutorial').addEventListener('click', () => {\n            this.hideTutorialModal();\n            tutorialManager.start();\n        });\n        document.getElementById('skip-tutorial').addEventListener('click', () => {\n            this.hideTutorialModal();\n        });\n        document.getElementById('skip-forever').addEventListener('click', async () => {\n            try {\n                await put('/api/settings', { tutorial_skipped_forever: true });\n                this.gameState.settings.tutorial_skipped_forever = true;\n                this.hideTutorialModal();\n                showToast('Туторіал відключено назавжди', 'success');\n            }\n            catch (error) {\n                console.error('Помилка збереження налаштувань туторіалу:', error);\n            }\n        });\n    }\n    async saveSettings() {\n        try {\n            const riskInput = document.getElementById('risk-input');\n            const rewardInput = document.getElementById('reward-input');\n            const risk = parseFloat(riskInput.value);\n            const reward = parseFloat(rewardInput.value);\n            if (risk < 0.1 || risk > 10) {\n                showToast('Ризик має бути від 0.1% до 10%', 'error');\n                return;\n            }\n            if (reward < 1 || reward > 5) {\n                showToast('Співвідношення прибутку має бути від 1 до 5', 'error');\n                return;\n            }\n            await put('/api/settings', {\n                risk_per_position: risk,\n                reward_ratio: reward\n            });\n            this.gameState.settings.risk_per_position = risk;\n            this.gameState.settings.reward_ratio = reward;\n            // Перераховуємо статистику з новими налаштуваннями\n            this.calculateStats();\n            this.updateStatsDisplay();\n            showToast('Налаштування збережено!', 'success');\n        }\n        catch (error) {\n            console.error('Помилка збереження налаштувань:', error);\n            showToast('Помилка збереження налаштувань', 'error');\n        }\n    }\n    async resetPositions() {\n        try {\n            await post('/api/positions/reset', {});\n            // Оновлюємо локальний стан\n            this.gameState.positions.forEach(p => p.result = 'none');\n            this.createPositionsGrid();\n            this.calculateStats();\n            this.updateStatsDisplay();\n            showToast('Всі позиції скинуті!', 'success');\n        }\n        catch (error) {\n            console.error('Помилка скидання позицій:', error);\n            showToast('Помилка скидання позицій', 'error');\n        }\n    }\n    checkTutorial() {\n        if (!this.gameState.settings.tutorial_completed &&\n            !this.gameState.settings.tutorial_skipped_forever) {\n            this.showTutorialModal();\n        }\n    }\n    showTutorialModal() {\n        const modal = document.getElementById('tutorial-modal');\n        modal.classList.add('show');\n    }\n    hideTutorialModal() {\n        const modal = document.getElementById('tutorial-modal');\n        modal.classList.remove('show');\n    }\n}\n// Ініціалізація гри після завантаження DOM\ndocument.addEventListener('DOMContentLoaded', () => {\n    const game = new RiskManagementGame();\n    game.init();\n});\n"],"names":["async","get","endpoint","response","fetch","ok","Error","status","json","put","data","method","headers","body","JSON","stringify","showToast","message","type","container","document","getElementById","createElement","id","className","appendChild","createToastContainer","toast","textContent","setTimeout","style","animation","parentNode","removeChild","PROFIT_GRADES","title","minProfit","minWinRate","color","emoji","TUTORIAL_STEPS","text","target","tutorialManager","constructor","this","currentStep","start","createOverlay","showStep","overlay","cssText","modal","step","highlightTarget","innerHTML","length","querySelector","addEventListener","finish","next","prev","action","selector","querySelectorAll","forEach","el","classList","remove","add","head","RiskManagementGame","gameState","positions","settings","risk_per_position","reward_ratio","tutorial_completed","tutorial_skipped_forever","stats","takes","stops","profit","winRate","init","initTheme","loadGameState","setupUI","checkTutorial","console","log","error","savedTheme","localStorage","getItem","systemPrefersDark","window","matchMedia","matches","theme","documentElement","setAttribute","updateThemeToggle","toggleTheme","newTheme","getAttribute","setItem","toggle","Promise","all","calculateStats","createPositionsGrid","updateStatsDisplay","updateSettingsUI","setupEventListeners","grid","position","card","result","toString","dataset","handlePositionClick","positionId","find","p","states","currentIndex","indexOf","nextState","filter","totalPositions","parseFloat","toFixed","currentLevelDisplay","currentGrade","grade","item","achieved","isCurrent","updateProfitGradeDisplay","updateMotivationMessage","msgEl","value","saveSettings","resetPositions","hideTutorialModal","riskInput","rewardInput","risk","reward","post","showTutorialModal"],"sourceRoot":""}