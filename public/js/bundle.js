(()=>{"use strict";var t={179:(t,e)=>{function s(t,s,a){const i=e.PROFIT_GRADES.find(e=>e.takes===t&&e.stops===s);if(i)return i;for(let t=e.PROFIT_GRADES.length-1;t>=0;t--)if(a>=e.PROFIT_GRADES[t].profitPct)return e.PROFIT_GRADES[t];return null}Object.defineProperty(e,"__esModule",{value:!0}),e.PROFIT_GRADES=void 0,e.getCurrentGrade=s,e.updateProfitGradeDisplay=function(t,a,i){const o=document.getElementById("profit-grades-list"),n=document.getElementById("current-level");o.innerHTML="";const r=s(t,a,i);e.PROFIT_GRADES.forEach(t=>{const e=document.createElement("div");e.className=`profit-grade-item ${t.className}`;const s=i>=t.profitPct,a=r&&r.profitPct===t.profitPct;s&&e.classList.add("achieved"),a&&e.classList.add("current"),e.innerHTML=`\n      <div class="grade-header">\n        <span class="grade-title">${t.label}</span>\n        <span class="grade-percentage">${t.profitPct}%</span>\n      </div>\n      <div class="grade-requirement">${t.description}</div>\n      <div class="grade-winrate">–ü–æ—Ç—Ä—ñ–±–Ω–∏–π win-rate: ${t.winRate}%</div>\n    `,o.appendChild(e)}),r?(n.innerHTML=`\n      –ü–æ—Ç–æ—á–Ω–∏–π —Ä—ñ–≤–µ–Ω—å: ${r.label}\n    `,n.className=`current-level-display ${r.className}`):(n.innerHTML="\n      –ü–æ—Ç–æ—á–Ω–∏–π —Ä—ñ–≤–µ–Ω—å: –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å\n    ",n.className="current-level-display initial")},e.PROFIT_GRADES=[{label:"–ë–µ–∑–∑–±–∏—Ç–∫–æ–≤—ñ—Å—Ç—å",profitPct:0,takes:5,stops:10,winRate:33.3,className:"grade-breakeven",description:"5 —Ç–µ–π–∫—ñ–≤ + 10 —Å—Ç–æ–ø—ñ–≤ = 0% –ø—Ä–∏–±—É—Ç–∫—É"},{label:"–õ–µ–≥–∫–∏–π –ø—Ä–∏–±—É—Ç–æ–∫",profitPct:3,takes:6,stops:9,winRate:40,className:"grade-light",description:"6 —Ç–µ–π–∫—ñ–≤ + 9 —Å—Ç–æ–ø—ñ–≤ = 3% –ø—Ä–∏–±—É—Ç–∫—É"},{label:"–•–æ—Ä–æ—à–∏–π –ø—Ä–∏–±—É—Ç–æ–∫",profitPct:6,takes:7,stops:8,winRate:46.7,className:"grade-good",description:"7 —Ç–µ–π–∫—ñ–≤ + 8 —Å—Ç–æ–ø—ñ–≤ = 6% –ø—Ä–∏–±—É—Ç–∫—É"},{label:"–í—ñ–¥–º—ñ–Ω–Ω–∏–π –ø—Ä–∏–±—É—Ç–æ–∫",profitPct:9,takes:8,stops:7,winRate:53.3,className:"grade-excellent",description:"8 —Ç–µ–π–∫—ñ–≤ + 7 —Å—Ç–æ–ø—ñ–≤ = 9% –ø—Ä–∏–±—É—Ç–∫—É"},{label:"–ß—É–¥–æ–≤–∏–π –ø—Ä–∏–±—É—Ç–æ–∫",profitPct:12,takes:9,stops:6,winRate:60,className:"grade-amazing",description:"9 —Ç–µ–π–∫—ñ–≤ + 6 —Å—Ç–æ–ø—ñ–≤ = 12% –ø—Ä–∏–±—É—Ç–∫—É"}]},203:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tutorialManager=void 0,e.tutorialManager={start(){console.log("üéì –¢—É—Ç–æ—Ä—ñ–∞–ª –∑–∞–ø—É—â–µ–Ω–æ"),alert("üéì –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ –≥—Ä–∏ –†–∏–∑–∏–∫-–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç—É!\n\n–í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∫–ª—ñ–∫–∞—Ç–∏ –ø–æ –ø–æ–∑–∏—Ü—ñ—è—Ö, —â–æ–± –≤—ñ–¥–º—ñ—á–∞—Ç–∏ —ó—Ö —è–∫ —Ç–µ–π–∫–∏ (–ø—Ä–∏–±—É—Ç–∫–æ–≤—ñ) –∞–±–æ —Å—Ç–æ–ø–∏ (–∑–±–∏—Ç–∫–æ–≤—ñ).\n\n–¶—ñ–ª—å - –¥–æ—Å—è–≥—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è –≥—Ä–∞–¥–∞—Ü—ñ—ó –ø—Ä–∏–±—É—Ç–∫—É!")}}},233:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.get=async function(t){const e=await fetch(t),s=await e.json();if(!s.success)throw new Error(s.error||"API Error");return s.data},e.post=async function(t,e){const s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();if(!a.success)throw new Error(a.error||"API Error");return a.data},e.put=async function(t,e){const s=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();if(!a.success)throw new Error(a.error||"API Error");return a.data}},398:(t,e)=>{if(Object.defineProperty(e,"__esModule",{value:!0}),e.showToast=function(t,e="success"){const s=document.getElementById("toast-container"),a=document.createElement("div");a.className=`toast ${e}`,a.textContent=t,s.appendChild(a),setTimeout(()=>{a.style.animation="toastSlideOut 0.3s ease",setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a)},300)},3e3)},!document.getElementById("toast-animation-styles")){const t=document.createElement("style");t.id="toast-animation-styles",t.textContent="\n    @keyframes toastSlideOut {\n      from {\n        transform: translateX(0);\n        opacity: 1;\n      }\n      to {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n    }\n  ",document.head.appendChild(t)}}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,s),o.exports}(()=>{const t=s(233),e=s(398),a=s(179),i=s(203);class o{constructor(){this.gameState={positions:[],settings:{id:1,risk_per_position:1,reward_ratio:2,tutorial_completed:!1,tutorial_skipped_forever:!1},stats:{takes:0,stops:0,profit:0,winRate:0}}}async init(){try{this.initTheme(),await this.loadGameState(),this.setupUI(),this.checkTutorial(),console.log("‚úÖ –ì—Ä–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —É—Å–ø—ñ—à–Ω–æ")}catch(t){console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≥—Ä–∏:",t),(0,e.showToast)("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥—Ä–∏","error")}}initTheme(){const t=localStorage.getItem("theme")||"light",e=window.matchMedia("(prefers-color-scheme: dark)").matches,s="auto"===t?e?"dark":"light":t;document.documentElement.setAttribute("data-theme",s),this.updateThemeToggle(s)}toggleTheme(){const t="light"===document.documentElement.getAttribute("data-theme")?"dark":"light";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),this.updateThemeToggle(t)}updateThemeToggle(t){const e=document.getElementById("theme-toggle");e&&(e.innerHTML="light"===t?"üåô":"‚òÄÔ∏è",e.setAttribute("aria-label","light"===t?"Switch to dark mode":"Switch to light mode"))}async loadGameState(){try{const[e,s]=await Promise.all([(0,t.get)("/api/positions"),(0,t.get)("/api/settings")]);this.gameState.positions=e,this.gameState.settings=s,this.calculateStats()}catch(t){throw console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –≥—Ä–∏:",t),t}}setupUI(){this.createPositionsGrid(),this.updateStatsDisplay(),this.updateSettingsUI(),this.setupEventListeners()}createPositionsGrid(){const t=document.getElementById("positions-grid");t.innerHTML="",this.gameState.positions.forEach(e=>{const s=document.createElement("div");s.className=`position-card ${e.result}`,s.textContent=e.id.toString(),s.dataset.id=e.id.toString(),s.addEventListener("click",()=>this.handlePositionClick(e.id)),t.appendChild(s)})}async handlePositionClick(s){try{const e=this.gameState.positions.find(t=>t.id===s);if(!e)return;const a=["none","take","stop"],i=a.indexOf(e.result),o=a[(i+1)%a.length];await(0,t.put)(`/api/positions/${s}`,{result:o}),e.result=o,document.querySelector(`[data-id="${s}"]`).className=`position-card ${o}`,this.calculateStats(),this.updateStatsDisplay()}catch(t){console.error("–ü–æ–º–∏–ª–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó:",t),(0,e.showToast)("–ü–æ–º–∏–ª–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó","error")}}calculateStats(){const t=this.gameState.positions.filter(t=>"take"===t.result).length,e=this.gameState.positions.filter(t=>"stop"===t.result).length,s=t+e,a=t*this.gameState.settings.reward_ratio+-1*e,i=s>0?t/s*100:0;this.gameState.stats={takes:t,stops:e,profit:parseFloat(a.toFixed(1)),winRate:parseFloat(i.toFixed(1))}}updateStatsDisplay(){document.getElementById("takes-count").textContent=this.gameState.stats.takes.toString(),document.getElementById("stops-count").textContent=this.gameState.stats.stops.toString(),document.getElementById("profit-pct").textContent=`${this.gameState.stats.profit}%`,document.getElementById("win-rate").textContent=`${this.gameState.stats.winRate}%`,(0,a.updateProfitGradeDisplay)(this.gameState.stats.takes,this.gameState.stats.stops,this.gameState.stats.profit),this.updateMotivationMessage()}updateMotivationMessage(){const t=document.getElementById("motivation-msg"),{takes:e,stops:s,profit:a}=this.gameState.stats;t.textContent=0===e&&0===s?"–ü–æ—á–Ω—ñ—Ç—å —Ç–æ—Ä–≥—É–≤–∞—Ç–∏, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏!":0===a&&5===e&&10===s?"‚öñÔ∏è –Ü–¥–µ–∞–ª—å–Ω–∞ –±–µ–∑–∑–±–∏—Ç–∫–æ–≤—ñ—Å—Ç—å! –¢–µ–ø–µ—Ä —Å–ø—Ä–æ–±—É–π—Ç–µ –¥–æ—Å—è–≥—Ç–∏ –ø—Ä–∏–±—É—Ç–∫—É.":a>0?`üí∞ –ß—É–¥–æ–≤–æ! –í–∏ –≤ –ø—Ä–∏–±—É—Ç–∫—É ${a}%. –ü—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ —É —Ç–æ–º—É –∂ –¥—É—Å—ñ!`:a<0?"üìâ –ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π—Ç–µ —á–µ—Ä–µ–∑ —Å—Ç–æ–ø–∏ - –≤–æ–Ω–∏ —á–∞—Å—Ç–∏–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó. –¢—Ä–µ–π–¥–∏–Ω–≥ - —Ü–µ –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∞ –≥—Ä–∞!":"–ü—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ —Ç–æ—Ä–≥—É–≤–∞—Ç–∏, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ —Å–≤—ñ–π –ø—Ä–æ–≥—Ä–µ—Å!"}updateSettingsUI(){document.getElementById("risk-input").value=this.gameState.settings.risk_per_position.toString(),document.getElementById("reward-input").value=this.gameState.settings.reward_ratio.toString()}setupEventListeners(){document.getElementById("theme-toggle")?.addEventListener("click",()=>{this.toggleTheme()}),document.getElementById("save-settings").addEventListener("click",async()=>{await this.saveSettings()}),document.getElementById("reset-positions").addEventListener("click",async()=>{await this.resetPositions()}),document.getElementById("show-guide-btn").addEventListener("click",()=>{i.tutorialManager.start()}),document.getElementById("start-tutorial").addEventListener("click",()=>{this.hideTutorialModal(),i.tutorialManager.start()}),document.getElementById("skip-tutorial").addEventListener("click",()=>{this.hideTutorialModal()}),document.getElementById("skip-forever").addEventListener("click",async()=>{try{await(0,t.put)("/api/settings",{tutorial_skipped_forever:!0}),this.gameState.settings.tutorial_skipped_forever=!0,this.hideTutorialModal(),(0,e.showToast)("–¢—É—Ç–æ—Ä—ñ–∞–ª –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ –Ω–∞–∑–∞–≤–∂–¥–∏","success")}catch(t){console.error("–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Ç—É—Ç–æ—Ä—ñ–∞–ª—É:",t)}})}async saveSettings(){try{const s=document.getElementById("risk-input"),a=document.getElementById("reward-input"),i=parseFloat(s.value),o=parseFloat(a.value);if(i<.1||i>10)return void(0,e.showToast)("–†–∏–∑–∏–∫ –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 0.1% –¥–æ 10%","error");if(o<1||o>5)return void(0,e.showToast)("–°–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è –ø—Ä–∏–±—É—Ç–∫—É –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 1 –¥–æ 5","error");await(0,t.put)("/api/settings",{risk_per_position:i,reward_ratio:o}),this.gameState.settings.risk_per_position=i,this.gameState.settings.reward_ratio=o,this.calculateStats(),this.updateStatsDisplay(),(0,e.showToast)("–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–æ!","success")}catch(t){console.error("–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å:",t),(0,e.showToast)("–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å","error")}}async resetPositions(){try{await(0,t.post)("/api/positions/reset",{}),this.gameState.positions.forEach(t=>t.result="none"),this.createPositionsGrid(),this.calculateStats(),this.updateStatsDisplay(),(0,e.showToast)("–í—Å—ñ –ø–æ–∑–∏—Ü—ñ—ó —Å–∫–∏–Ω—É—Ç—ñ!","success")}catch(t){console.error("–ü–æ–º–∏–ª–∫–∞ —Å–∫–∏–¥–∞–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π:",t),(0,e.showToast)("–ü–æ–º–∏–ª–∫–∞ —Å–∫–∏–¥–∞–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π","error")}}checkTutorial(){this.gameState.settings.tutorial_completed||this.gameState.settings.tutorial_skipped_forever||this.showTutorialModal()}showTutorialModal(){document.getElementById("tutorial-modal").classList.add("show")}hideTutorialModal(){document.getElementById("tutorial-modal").classList.remove("show")}}document.addEventListener("DOMContentLoaded",()=>{(new o).init()})})()})();
//# sourceMappingURL=bundle.js.map